app = "gay-minecraft"
primary_region = "atl"

[build]
    image = "itzg/minecraft-server:java17-alpine"

[env]
    TYPE = "FORGE"
    VERSION = "1.19.2"
    FORGE_VERSION = "43.2.14"
    EULA = "true"
    # modpack/datapack config
    GENERIC_PACK = "https://freedman.dev/minecraft/Magic_Mods_Amaya_Likes__Automat-the_fourth_one__SERVER.zip"
    DATAPACKS = "https://freedman.dev/minecraft/datapacks.zip"
    # min heap size of 512MB, max of 3GB
    INIT_MEMORY = "512M"
    MAX_MEMORY = "3G"
    # autopause makes the server use fewer resources after no one
    # has connected to it for more than 5 minutes. once someone
    # connects, it spins the JVM back up
    ENABLE_AUTOPAUSE = "TRUE"
    AUTOPAUSE_TIMEOUT_EST = "3600"
    AUTOPAUSE_TIMEOUT_INIT = "600"
    AUTOPAUSE_TIMEOUT_KN = "120"
    AUTOPAUSE_PERIOD = "10"
    AUTOPAUSE_KNOCK_INTERFACE = "eth0"
    MAX_TICK_TIME = "-1"
    # prevents logs from building up indefinitely
    ENABLE_ROLLING_LOGS = "true"
    # MC Server config
    MODE = "survival"
    SERVER_NAME = "gay_minecraft"
    MOTD = "gay minecraft"
    DIFFICULTY = "easy"
    SEED = "gay minecraft"
    LEVEL = "gay_minecraft_v2"
    # Operator/admin config
    OVERRIDE_OPS = "true"
    OPS_FILE = "https://freedman.dev/minecraft/ops.json"
    # Whitelist config
    OVERRIDE_WHITELIST = "true"
    ENABLE_WHITELIST = "true"
    ENFORCE_WHITELIST = "true"
    WHITELIST_FILE = "https://freedman.dev/minecraft/whitelist.json"

[mounts]
    source = "mc_data"
    destination = "/data"

[[services]]
    internal_port = 25565
    protocol = "tcp"
    ports = { port = 25565 }
    concurrency = { type = "connections", hard_limit = 25, soft_limit = 20 }
